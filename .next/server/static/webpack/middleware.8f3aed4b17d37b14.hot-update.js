"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/jwt */ \"(middleware)/./node_modules/next-auth/jwt/index.js\");\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_jwt__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_auth_middleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/middleware */ \"(middleware)/./node_modules/next-auth/middleware.js\");\n/* harmony import */ var next_auth_middleware__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth_middleware__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _constants_enums__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./constants/enums */ \"(middleware)/./src/constants/enums.ts\");\n\n\n\n\n// تكوين الأمان\nconst securityConfig = {\n    maxAge: 60 * 60 * 24 * 7,\n    secure: \"development\" === 'production',\n    sameSite: 'lax',\n    path: '/'\n};\n/**\r\n * Middleware to handle authentication and route protection.\r\n */ /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_auth_middleware__WEBPACK_IMPORTED_MODULE_2__.withAuth)(async function middleware(request) {\n    try {\n        const url = request.nextUrl.clone();\n        const pathname = url.pathname;\n        const baseUrl = \"https://full-stack-portfolio-a333.vercel.app\" || 0;\n        console.log(\"Middleware - Processing request:\", {\n            pathname,\n            baseUrl\n        });\n        // إضافة رؤوس الأمان\n        const requestHeaders = new Headers(request.headers);\n        requestHeaders.set(\"x-url\", request.url);\n        requestHeaders.set(\"x-frame-options\", \"DENY\");\n        requestHeaders.set(\"x-content-type-options\", \"nosniff\");\n        requestHeaders.set(\"referrer-policy\", \"strict-origin-when-cross-origin\");\n        requestHeaders.set(\"strict-transport-security\", \"max-age=63072000; includeSubDomains; preload\");\n        requestHeaders.set(\"x-xss-protection\", \"1; mode=block\");\n        requestHeaders.set(\"content-security-policy\", \"default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline';\");\n        const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next({\n            request: {\n                headers: requestHeaders\n            }\n        });\n        // التحقق من المصادقة\n        const token = await (0,next_auth_jwt__WEBPACK_IMPORTED_MODULE_1__.getToken)({\n            req: request,\n            secret: \"60d665bff7695e6de1f0528f2d43376489f244dacf8f098279c870109ceac7c6\"\n        });\n        const isAuthenticated = !!token;\n        console.log(\"Middleware - Auth status:\", {\n            isAuthenticated,\n            pathname,\n            timestamp: new Date().toISOString()\n        });\n        // تعريف أنواع المسارات\n        const isAuthPage = pathname.startsWith(`/${_constants_enums__WEBPACK_IMPORTED_MODULE_3__.Routes.AUTH}`);\n        const protectedRoutes = [\n            _constants_enums__WEBPACK_IMPORTED_MODULE_3__.Routes.PROFILE,\n            _constants_enums__WEBPACK_IMPORTED_MODULE_3__.Routes.ADMIN\n        ];\n        const isProtectedRoute = protectedRoutes.some((route)=>pathname.startsWith(`/${route}`));\n        // التحقق من الصلاحيات\n        if (isProtectedRoute && isAuthenticated) {\n            const userRole = token?.role;\n            if (pathname.startsWith(`/${_constants_enums__WEBPACK_IMPORTED_MODULE_3__.Routes.ADMIN}`) && userRole !== _constants_enums__WEBPACK_IMPORTED_MODULE_3__.UserRole.ADMIN) {\n                console.log(\"Middleware - Access denied:\", {\n                    pathname,\n                    userRole,\n                    requiredRole: _constants_enums__WEBPACK_IMPORTED_MODULE_3__.UserRole.ADMIN\n                });\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(`/${_constants_enums__WEBPACK_IMPORTED_MODULE_3__.Routes.AUTH}/${_constants_enums__WEBPACK_IMPORTED_MODULE_3__.Pages.ERROR}`, request.url));\n            }\n        }\n        // توجيه المستخدمين المسجلين بعيداً عن صفحات المصادقة\n        if (isAuthPage && isAuthenticated) {\n            console.log(\"Middleware - Redirecting authenticated user from auth page\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/', request.url));\n        }\n        // توجيه المستخدمين غير المسجلين إلى صفحة تسجيل الدخول\n        if (isProtectedRoute && !isAuthenticated) {\n            console.log(\"Middleware - Redirecting unauthenticated user to login\");\n            const callbackUrl = encodeURIComponent(request.url);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(`/${_constants_enums__WEBPACK_IMPORTED_MODULE_3__.Routes.AUTH}/${_constants_enums__WEBPACK_IMPORTED_MODULE_3__.Pages.LOGIN}?callbackUrl=${callbackUrl}`, request.url));\n        }\n        return response;\n    } catch (error) {\n        console.error(\"Middleware Error:\", {\n            error: error instanceof Error ? error.message : \"Unknown error\",\n            pathname: request.nextUrl.pathname,\n            timestamp: new Date().toISOString()\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(`/${_constants_enums__WEBPACK_IMPORTED_MODULE_3__.Routes.AUTH}/${_constants_enums__WEBPACK_IMPORTED_MODULE_3__.Pages.ERROR}`, request.url));\n    }\n}, {\n    callbacks: {\n        authorized: ({ token })=>!!token\n    },\n    pages: {\n        signIn: `/${_constants_enums__WEBPACK_IMPORTED_MODULE_3__.Routes.AUTH}/${_constants_enums__WEBPACK_IMPORTED_MODULE_3__.Pages.LOGIN}`,\n        error: `/${_constants_enums__WEBPACK_IMPORTED_MODULE_3__.Routes.AUTH}/${_constants_enums__WEBPACK_IMPORTED_MODULE_3__.Pages.ERROR}`\n    }\n}));\nconst config = {\n    matcher: [\n        /*\r\n     * Match all request paths except for the ones starting with:\r\n     * - api (API routes)\r\n     * - _next/static (static files)\r\n     * - _next/image (image optimization files)\r\n     * - favicon.ico (favicon file)\r\n     * - public folder\r\n     */ \"/((?!api|_next/static|_next/image|favicon.ico|public).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQ0Q7S0FDRDtBQUNILEVBQUUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccmF5YVxcU2hvcHBpbmdDYXJ0XFxwb3J0Zm9saW8gLSBDb3B5IC0gQ29weSAtIENvcHkgLSBDb3B5IC0gQ29weVxcc3JjXFxtaWRkbGV3YXJlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tIFwibmV4dC1hdXRoL2p3dFwiO1xyXG5pbXBvcnQgeyB3aXRoQXV0aCB9IGZyb20gXCJuZXh0LWF1dGgvbWlkZGxld2FyZVwiO1xyXG5pbXBvcnQgeyBSb3V0ZXMsIFBhZ2VzLCBVc2VyUm9sZSB9IGZyb20gXCIuL2NvbnN0YW50cy9lbnVtc1wiO1xyXG5pbXBvcnQgeyBhdXRoQ29uZmlnIH0gZnJvbSBcIkAvY29uZmlnL2F1dGguY29uZmlnXCI7XHJcblxyXG4vLyDYqtmD2YjZitmGINin2YTYo9mF2KfZhlxyXG5jb25zdCBzZWN1cml0eUNvbmZpZyA9IHtcclxuICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDcsIC8vIDcgZGF5c1xyXG4gIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICBzYW1lU2l0ZTogJ2xheCcgYXMgY29uc3QsXHJcbiAgcGF0aDogJy8nLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIE1pZGRsZXdhcmUgdG8gaGFuZGxlIGF1dGhlbnRpY2F0aW9uIGFuZCByb3V0ZSBwcm90ZWN0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgd2l0aEF1dGgoXHJcbiAgYXN5bmMgZnVuY3Rpb24gbWlkZGxld2FyZShyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXJsID0gcmVxdWVzdC5uZXh0VXJsLmNsb25lKCk7XHJcbiAgICAgIGNvbnN0IHBhdGhuYW1lID0gdXJsLnBhdGhuYW1lO1xyXG4gICAgICBjb25zdCBiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMIHx8IHJlcXVlc3QudXJsLnNwbGl0KCcvJykuc2xpY2UoMCwgMykuam9pbignLycpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIk1pZGRsZXdhcmUgLSBQcm9jZXNzaW5nIHJlcXVlc3Q6XCIsIHsgcGF0aG5hbWUsIGJhc2VVcmwgfSk7XHJcblxyXG4gICAgICAvLyDYpdi22KfZgdipINix2KTZiNizINin2YTYo9mF2KfZhlxyXG4gICAgICBjb25zdCByZXF1ZXN0SGVhZGVycyA9IG5ldyBIZWFkZXJzKHJlcXVlc3QuaGVhZGVycyk7XHJcbiAgICAgIHJlcXVlc3RIZWFkZXJzLnNldChcIngtdXJsXCIsIHJlcXVlc3QudXJsKTtcclxuICAgICAgcmVxdWVzdEhlYWRlcnMuc2V0KFwieC1mcmFtZS1vcHRpb25zXCIsIFwiREVOWVwiKTtcclxuICAgICAgcmVxdWVzdEhlYWRlcnMuc2V0KFwieC1jb250ZW50LXR5cGUtb3B0aW9uc1wiLCBcIm5vc25pZmZcIik7XHJcbiAgICAgIHJlcXVlc3RIZWFkZXJzLnNldChcInJlZmVycmVyLXBvbGljeVwiLCBcInN0cmljdC1vcmlnaW4td2hlbi1jcm9zcy1vcmlnaW5cIik7XHJcbiAgICAgIHJlcXVlc3RIZWFkZXJzLnNldChcInN0cmljdC10cmFuc3BvcnQtc2VjdXJpdHlcIiwgXCJtYXgtYWdlPTYzMDcyMDAwOyBpbmNsdWRlU3ViRG9tYWluczsgcHJlbG9hZFwiKTtcclxuICAgICAgcmVxdWVzdEhlYWRlcnMuc2V0KFwieC14c3MtcHJvdGVjdGlvblwiLCBcIjE7IG1vZGU9YmxvY2tcIik7XHJcbiAgICAgIHJlcXVlc3RIZWFkZXJzLnNldChcclxuICAgICAgICBcImNvbnRlbnQtc2VjdXJpdHktcG9saWN5XCIsXHJcbiAgICAgICAgXCJkZWZhdWx0LXNyYyAnc2VsZic7IHNjcmlwdC1zcmMgJ3NlbGYnICd1bnNhZmUtaW5saW5lJyAndW5zYWZlLWV2YWwnOyBzdHlsZS1zcmMgJ3NlbGYnICd1bnNhZmUtaW5saW5lJztcIlxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UubmV4dCh7XHJcbiAgICAgICAgcmVxdWVzdDogeyBoZWFkZXJzOiByZXF1ZXN0SGVhZGVycyB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vINin2YTYqtit2YLZgiDZhdmGINin2YTZhdi12KfYr9mC2KlcclxuICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCBnZXRUb2tlbih7IFxyXG4gICAgICAgIHJlcTogcmVxdWVzdCwgXHJcbiAgICAgICAgc2VjcmV0OiBwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQgXHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zdCBpc0F1dGhlbnRpY2F0ZWQgPSAhIXRva2VuO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coXCJNaWRkbGV3YXJlIC0gQXV0aCBzdGF0dXM6XCIsIHsgXHJcbiAgICAgICAgaXNBdXRoZW50aWNhdGVkLCBcclxuICAgICAgICBwYXRobmFtZSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vINiq2LnYsdmK2YEg2KPZhtmI2KfYuSDYp9mE2YXYs9in2LHYp9iqXHJcbiAgICAgIGNvbnN0IGlzQXV0aFBhZ2UgPSBwYXRobmFtZS5zdGFydHNXaXRoKGAvJHtSb3V0ZXMuQVVUSH1gKTtcclxuICAgICAgY29uc3QgcHJvdGVjdGVkUm91dGVzID0gW1JvdXRlcy5QUk9GSUxFLCBSb3V0ZXMuQURNSU5dO1xyXG4gICAgICBjb25zdCBpc1Byb3RlY3RlZFJvdXRlID0gcHJvdGVjdGVkUm91dGVzLnNvbWUoKHJvdXRlKSA9PlxyXG4gICAgICAgIHBhdGhuYW1lLnN0YXJ0c1dpdGgoYC8ke3JvdXRlfWApXHJcbiAgICAgICk7XHJcblxyXG4gICAgICAvLyDYp9mE2KrYrdmC2YIg2YXZhiDYp9mE2LXZhNin2K3Zitin2KpcclxuICAgICAgaWYgKGlzUHJvdGVjdGVkUm91dGUgJiYgaXNBdXRoZW50aWNhdGVkKSB7XHJcbiAgICAgICAgY29uc3QgdXNlclJvbGUgPSB0b2tlbj8ucm9sZSBhcyBVc2VyUm9sZTtcclxuICAgICAgICBpZiAocGF0aG5hbWUuc3RhcnRzV2l0aChgLyR7Um91dGVzLkFETUlOfWApICYmIHVzZXJSb2xlICE9PSBVc2VyUm9sZS5BRE1JTikge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJNaWRkbGV3YXJlIC0gQWNjZXNzIGRlbmllZDpcIiwgeyBcclxuICAgICAgICAgICAgcGF0aG5hbWUsIFxyXG4gICAgICAgICAgICB1c2VyUm9sZSxcclxuICAgICAgICAgICAgcmVxdWlyZWRSb2xlOiBVc2VyUm9sZS5BRE1JTlxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoYC8ke1JvdXRlcy5BVVRIfS8ke1BhZ2VzLkVSUk9SfWAsIHJlcXVlc3QudXJsKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDYqtmI2KzZitmHINin2YTZhdiz2KrYrtiv2YXZitmGINin2YTZhdiz2KzZhNmK2YYg2KjYudmK2K/Yp9mLINi52YYg2LXZgdit2KfYqiDYp9mE2YXYtdin2K/ZgtipXHJcbiAgICAgIGlmIChpc0F1dGhQYWdlICYmIGlzQXV0aGVudGljYXRlZCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiTWlkZGxld2FyZSAtIFJlZGlyZWN0aW5nIGF1dGhlbnRpY2F0ZWQgdXNlciBmcm9tIGF1dGggcGFnZVwiKTtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy8nLCByZXF1ZXN0LnVybCkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDYqtmI2KzZitmHINin2YTZhdiz2KrYrtiv2YXZitmGINi62YrYsSDYp9mE2YXYs9is2YTZitmGINil2YTZiSDYtdmB2K3YqSDYqtiz2KzZitmEINin2YTYr9iu2YjZhFxyXG4gICAgICBpZiAoaXNQcm90ZWN0ZWRSb3V0ZSAmJiAhaXNBdXRoZW50aWNhdGVkKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJNaWRkbGV3YXJlIC0gUmVkaXJlY3RpbmcgdW5hdXRoZW50aWNhdGVkIHVzZXIgdG8gbG9naW5cIik7XHJcbiAgICAgICAgY29uc3QgY2FsbGJhY2tVcmwgPSBlbmNvZGVVUklDb21wb25lbnQocmVxdWVzdC51cmwpO1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTChgLyR7Um91dGVzLkFVVEh9LyR7UGFnZXMuTE9HSU59P2NhbGxiYWNrVXJsPSR7Y2FsbGJhY2tVcmx9YCwgcmVxdWVzdC51cmwpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIk1pZGRsZXdhcmUgRXJyb3I6XCIsIHtcclxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIixcclxuICAgICAgICBwYXRobmFtZTogcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoYC8ke1JvdXRlcy5BVVRIfS8ke1BhZ2VzLkVSUk9SfWAsIHJlcXVlc3QudXJsKSk7XHJcbiAgICB9XHJcbiAgfSxcclxuICB7XHJcbiAgICBjYWxsYmFja3M6IHtcclxuICAgICAgYXV0aG9yaXplZDogKHsgdG9rZW4gfSkgPT4gISF0b2tlbixcclxuICAgIH0sXHJcbiAgICBwYWdlczoge1xyXG4gICAgICBzaWduSW46IGAvJHtSb3V0ZXMuQVVUSH0vJHtQYWdlcy5MT0dJTn1gLFxyXG4gICAgICBlcnJvcjogYC8ke1JvdXRlcy5BVVRIfS8ke1BhZ2VzLkVSUk9SfWAsXHJcbiAgICB9LFxyXG4gIH1cclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgbWF0Y2hlcjogW1xyXG4gICAgLypcclxuICAgICAqIE1hdGNoIGFsbCByZXF1ZXN0IHBhdGhzIGV4Y2VwdCBmb3IgdGhlIG9uZXMgc3RhcnRpbmcgd2l0aDpcclxuICAgICAqIC0gYXBpIChBUEkgcm91dGVzKVxyXG4gICAgICogLSBfbmV4dC9zdGF0aWMgKHN0YXRpYyBmaWxlcylcclxuICAgICAqIC0gX25leHQvaW1hZ2UgKGltYWdlIG9wdGltaXphdGlvbiBmaWxlcylcclxuICAgICAqIC0gZmF2aWNvbi5pY28gKGZhdmljb24gZmlsZSlcclxuICAgICAqIC0gcHVibGljIGZvbGRlclxyXG4gICAgICovXHJcbiAgICBcIi8oKD8hYXBpfF9uZXh0L3N0YXRpY3xfbmV4dC9pbWFnZXxmYXZpY29uLmljb3xwdWJsaWMpLiopXCIsXHJcbiAgXSxcclxufTtcclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldFRva2VuIiwid2l0aEF1dGgiLCJSb3V0ZXMiLCJQYWdlcyIsIlVzZXJSb2xlIiwic2VjdXJpdHlDb25maWciLCJtYXhBZ2UiLCJzZWN1cmUiLCJwcm9jZXNzIiwic2FtZVNpdGUiLCJwYXRoIiwibWlkZGxld2FyZSIsInJlcXVlc3QiLCJ1cmwiLCJuZXh0VXJsIiwiY2xvbmUiLCJwYXRobmFtZSIsImJhc2VVcmwiLCJlbnYiLCJORVhUQVVUSF9VUkwiLCJzcGxpdCIsInNsaWNlIiwiam9pbiIsImNvbnNvbGUiLCJsb2ciLCJyZXF1ZXN0SGVhZGVycyIsIkhlYWRlcnMiLCJoZWFkZXJzIiwic2V0IiwicmVzcG9uc2UiLCJuZXh0IiwidG9rZW4iLCJyZXEiLCJzZWNyZXQiLCJORVhUQVVUSF9TRUNSRVQiLCJpc0F1dGhlbnRpY2F0ZWQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJpc0F1dGhQYWdlIiwic3RhcnRzV2l0aCIsIkFVVEgiLCJwcm90ZWN0ZWRSb3V0ZXMiLCJQUk9GSUxFIiwiQURNSU4iLCJpc1Byb3RlY3RlZFJvdXRlIiwic29tZSIsInJvdXRlIiwidXNlclJvbGUiLCJyb2xlIiwicmVxdWlyZWRSb2xlIiwicmVkaXJlY3QiLCJVUkwiLCJFUlJPUiIsImNhbGxiYWNrVXJsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiTE9HSU4iLCJlcnJvciIsIkVycm9yIiwibWVzc2FnZSIsImNhbGxiYWNrcyIsImF1dGhvcml6ZWQiLCJwYWdlcyIsInNpZ25JbiIsImNvbmZpZyIsIm1hdGNoZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});